const slp_setting_helper=function(){let i={},n,s=new FormData,t=jQuery("#settings_file"),o=this;this.download=function(e,t,i){t=new window.Blob([t],{type:i});window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(t,e):((i=document.createElement("a")).href=URL.createObjectURL(t),i.download=e,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i))},this.initialize=function(){jQuery("div[data-related_to]").on("mouseenter",SLP_ADMIN.helper.related_on).on("mouseleave",SLP_ADMIN.helper.related_off),jQuery("a#export_settings").on("click",this.export_settings),t.on("change",this.upload_settings)},this.export_settings=function(){jQuery.ajax({method:"GET",url:slp_data.rest_path+"options/all/",dataType:"json"}).fail(function(e,t,i){console.log(e,t,i),e.responseJSON&&e.responseJSON.message&&jQuery("#"+o.divID+" .map-messages").addClass("error").prepend(e.responseJSON.message).show()}).done(function(e){200!==e.state&&console.log("SLP settings export error"),o.download("slp_settings.json",JSON.stringify(e),"application/json")})},this.import_settings=function(t){t.url&&(s.append("data_type","settings_json"),s.append("action","import-settings"),s.append("file-meta",JSON.stringify(t)),s.append("_wpnonce",slp_data.import_nonce),jQuery.ajax({url:slp_data.rest_path+"options/import/",data:s,processData:!1,contentType:!1,dataType:"json",type:"POST",success:function(e){e.success?(AdminUI.notifications.remove_all(),AdminUI.notifications.add("info","Import of "+t.filename+completed)):(AdminUI.notifications.add("info","Uploading "+t.filename+" failed."),e.data.message&&AdminUI.notifications.add("error",e.data.message))},beforeSend:function(){n=AdminUI.notifications.add("info","Importing "+t.filename+"&hellip;")},xhr:function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=(e=e.loaded/e.total*100).toFixed(2),AdminUI.notifications.update(n,"Server received "+e+"%"))},!1),e}}))},this.upload_settings=function(e){e.preventDefault(),t[0].files[0].name&&(s.append("data_type","settings_json"),s.append("action","upload-attachment"),s.append("async-upload",t[0].files[0]),s.append("name",t[0].files[0].name),s.append("_wpnonce",slp_data.nonce),jQuery.ajax({url:slp_data.upload_url,data:s,processData:!1,contentType:!1,dataType:"json",type:"POST",success:function(e){e.success?(AdminUI.notifications.remove_all(),AdminUI.notifications.add("info","Upload complete to "+e.data.filename),o.import_settings(e.data)):(AdminUI.notifications.add("info","Uploading "+e.data.filename+" failed."),e.data.message&&AdminUI.notifications.add("error",e.data.message))},error:function(e,t,i){AdminUI.notifications.add("info","Uploading failed."),AdminUI.notifications.add("error",t),AdminUI.notifications.add("error",i),AdminUI.notifications.add("error",e.responseText)},beforeSend:function(){n=AdminUI.notifications.add("info","Uploading "+t[0].files[0].name+"&hellip;")}}))},this.related_on=function(){let e=jQuery(this).attr("data-related_to"),t=e.split(",");t.forEach(function(e){var t=jQuery('div[id*="'+e+'"]');jQuery(t).addClass("highlight-related"),void 0===i[e]&&(i[e]=t)})},this.related_off=function(){let e;for(e in i){var t;i.hasOwnProperty(e)&&(t=i[e],jQuery(t).removeClass("highlight-related"),i[e]=void 0)}}},SLP_Admin_Plugin_Style={scroll_in_progress:!1,starting_theme:void 0,style_id:void 0,style_obj:void 0,user_is_premier:!1,initialize:function(){this.style_obj=jQuery("#input-group-options_nojs\\[style\\]"),this.user_is_premier="1"===jQuery(this.style_obj).attr("data-premier"),this.style_id=jQuery("#options_nojs\\[style_id\\]").val(),"undefined"!=typeof SLP_Admin_Settings_Help&&(jQuery("div.theme .button-secondary").on("click",SLP_Admin_Settings_Help.PluginStyle.set_active_style),jQuery(".wpcsl-style_vision_list").on("scroll",SLP_Admin_Settings_Help.PluginStyle.get_more_style))},get_more_style:function(){var e,t;SLP_Admin_Settings_Help.PluginStyle.scroll_in_progress||(SLP_Admin_Settings_Help.PluginStyle.scroll_in_progress=!0,e=SLP_Admin_Settings_Help.PluginStyle.style_obj,t=jQuery(e).attr("data-page_len"),e=jQuery(e).attr("data-pages_loaded"),t="https://storelocatorplus.com/wp-json/wp/v2/slp_style_gallery?orderby=title&order=asc&per_page="+t+"&page="+ ++e,jQuery.get(t,"",SLP_Admin_Settings_Help.PluginStyle.add_more_style).fail(function(e){SLP_Admin_Settings_Help.PluginStyle.scroll_in_progress=!1,void 0!==e.responseJSON&&"rest_post_invalid_page_number"===e.responseJSON.code&&jQuery(".wpcsl-style_vision_list").off("scroll")}))},add_more_style:function(e){var t,i,n,s=SLP_Admin_Settings_Help.PluginStyle.style_obj;e.length<1?jQuery(s).attr("style","border-bottom: none; padding-bottom: 1em;"):(t=jQuery(s).attr("data-pages_loaded"),jQuery(s).attr("data-pages_loaded",++t),i=jQuery(s).find(".card_list"),n="",jQuery(e).each(function(){n=SLP_Admin_Settings_Help.PluginStyle.vision_item_html(this),jQuery(i).append(n)}),jQuery("div.theme .button-secondary").off("click").on("click",SLP_Admin_Settings_Help.PluginStyle.set_active_style),SLP_Admin_Settings_Help.PluginStyle.scroll_in_progress=!1)},vision_item_html:function(e){let t="";SLP_Admin_Settings_Help.PluginStyle.style_id==e.id&&(t=" active ");var i,n="",s="";return""!=(n=void 0!==e.custom_fields.access_level?e.custom_fields.access_level[0]:n)&&!SLP_Admin_Settings_Help.PluginStyle.user_is_premier||(i=(""==t?jQuery("#select_text"):jQuery("#active_text")).val(),s='<div class="card-section theme-actions"><a class="button button-secondary activate"  data-post_id="'+e.id+'" aria-label="'+i+'">'+i+"</a></div>"),'<div class="card theme '+n+t+'"><div class="card-divider"><h2 class="theme-name">'+e.title.rendered+'</h2></div><div class="card-section details">'+e.content.rendered+"</div>"+s+"</div>"},set_active_style:function(e){e.preventDefault(),jQuery(this).text("Updating settings...");var e=jQuery(this).attr("data-post_id"),t=jQuery(this).attr("data-slug"),i=jQuery("div.theme.active"),n=jQuery(this).closest(".card.theme");jQuery(i).attr("data-style")!==jQuery(n).attr("data-style")?(jQuery(i).removeClass("active"),jQuery(i).find(".button-secondary").text("Select")):SLP_ADMIN.options.change_option(n,"options_nojs[style_id]","0"),jQuery(n).addClass("active"),jQuery("#options_nojs\\[style_id\\]").val(e),jQuery("#options_nojs\\[style\\]").val(t),jQuery(".button-primary").click()},show_details:function(){var e=jQuery("select#options_nojs\\[theme\\] option:selected").val(),t="#"+e+"_details",i="<h3>"+jQuery("select#options_nojs\\[theme\\] option:selected").text()+"</h3>"+jQuery(t).html();jQuery(".settings-description").toggleClass("is-visible").html(i),e!==SLP_Admin_Settings_Help.PluginStyle.starting_theme&&(SLP_Admin_Settings_Help.PluginStyle.starting_theme=e,SLP_Admin_Settings_Help.PluginStyle.set_theme_options(t))},set_theme_options:function(e){return jQuery(e+" > .theme_option_value").each(function(){var e=jQuery(this).attr("settings_field");jQuery('[name="'+e+'"]').val(jQuery(this).text())}),!1}};jQuery(document).ready(function(){SLP_ADMIN.helper=new slp_setting_helper,SLP_ADMIN.helper.initialize(),"undefined"!=typeof SLP_Admin_Settings_Help&&(SLP_Admin_Settings_Help.PluginStyle=SLP_Admin_Plugin_Style,SLP_Admin_Settings_Help.PluginStyle.initialize())});
//# sourceMappingURL=admin-settings-tab.min.js.map